#: import SlideTransition kivy.uix.screenmanager.SlideTransition
#: import get_color_from_hex kivy.utils.get_color_from_hex
#: import MapView kivy_garden.mapview.MapView

WindowManager:

<PreLoadWindow>:
    name: "preload"
    status_text: "Loading..."
    title: app.title
   
    MDFloatLayout:
        md_bg_color: 0,0,0,1
    
        Image:
            source: root.get_logo()
            size_hint: 1, None
            size: 500, 500
            pos_hint: {"x": 0, "y": .275}
            # size: self.texture_size[0] / 2, self.texture_size[1] / 2
            # opacity: 0.1
        
        MDLabel:
            id: status_label
            bold: True
            text: root.status_text
            color: 1,1,1,1
            halign: "center"
            pos_hint: {"center_x" : .5, "y" : -.3}
    
        MDRaisedButton:
            id: go_button
            opacity: 0
            disabled: True
            text: "Let's Go"
            pos_hint: {"center_x" : .5, "y" : .05}
            on_press: root.switch_window()

<MainWindow>:
    name: "main"
    MDBoxLayout:
        orientation: 'vertical'
        md_bg_color: get_color_from_hex("#0d021b")
        MDFloatLayout:
            orientation: "horizontal"
            size_hint_y: .18
            MDTextField:
                canvas.after:
                    Color:
                        rgba: root.box_color if not self.focus else (0, 0, 0, 0)
                    Line:
                        width: dp(1)
                        rectangle: (*self.pos, *self.size)
                hint_text: "IP Address"
                id: new_ip
                size_hint_x: .15
                size_hint_y: .47
                font_size: 11
                pos_hint: {"x" : 0.01, "center_y": .67}                
                readonly: True
                opacity: 1
                mode: "fill"
                text_color_focus: '#fcb711'
                text_color_normal: '#fcb711'
                hint_text: 'IP Address:'
                hint_text_color_normal: '#fcb711'
                hint_text_color_focus: '#fcb711'
                fill_color_normal: get_color_from_hex("#0d021b")
                fill_color_focus: get_color_from_hex("#000000")
            MDTextField:
                canvas.after:
                    Color:
                        rgba: root.box_color if not self.focus else (0, 0, 0, 0)
                    Line:
                        width: dp(1)
                        rectangle: (*self.pos, *self.size)
                hint_text: "Node:"
                id: connected_node
                mode: "fill"
                size_hint_x: .4
                size_hint_y: .47
                font_size: 11
                font_name: root.get_font()            
                pos_hint: {"x" : .18, "center_y": .67}                
                readonly: True
                opacity: 1
                text_color_focus: '#fcb711'
                text_color_normal: '#fcb711'                
                hint_text_color_normal: '#fcb711'
                hint_text_color_focus: '#fcb711'
                fill_color_normal: get_color_from_hex("#0d021b")
                fill_color_focus: get_color_from_hex("#000000")
            MDLabel:
                text: "Bandwidth"
                font_size: 11
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                normal_color: app.theme_cls.accent_color
                pos_hint: {"x" : .01, "center_y": .2}
            MDProgressBar:
                id: quota
                value: 0
                color: app.theme_cls.accent_color
                #back_color: get_color_from_hex("#ffffff")
                pos_hint: {"x" : .085, "center_y" : .2 }
                size_hint_x: .475
                size_hint_y: .06
            MDLabel:
                id: quota_pct
                text: "0.00%"
                font_size: 11
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                normal_color: app.theme_cls.accent_color
                pos_hint: {"x" : .57, "center_y": .2}
            MDLabel:
                text: "Sort"
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                normal_color: app.theme_cls.accent_color
                pos_hint: {"x" : .63, "y": .25}
            MDDropDownItem:
                id: drop_item
                pos_hint: {'x': .625, 'y': .25}
                text: "None"
                on_release: root.menu.open()  
            TooltipMDRaisedButton:
                tooltip_text: "VPNs encrypt your internet traffic, however DNS traffic is still in plaintext. Cloudflare's WARP will encrypt your DNS traffic ensuring no one can see your browsing history."
                md_bg_color: get_color_from_hex("#0d021b")
                pos_hint: {'x' : .72, 'center_y': .5}
                on_press: root.start_warp()
                
                Image:
                    id: warp
                    size_hint: 2,2
                    source: root.set_warp_icon()
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                            
            Image:
                id: protected
                source: root.set_protected_icon(False, "")
                opacity: 0
                size_hint: None, None
                height: "65dp"
                pos_hint: {'x' : .8, 'center_y' : .5}    
            Image:
                source: root.get_logo()
                size_hint: None, None
                height: "75dp"
                pos_hint: {'x' : .9, 'center_y' : .5}
        


        MDTabs:
            id: android_tabs
            on_tab_switch: root.on_tab_switch(*args)
            size_hint_y: None
            height: "48dp"
            tab_indicator_anim: True
            color: 1,1,1,1
            normal_color: get_color_from_hex("#fcb711")
            background_color: get_color_from_hex("#fcb711")
        
        MDBoxLayout:
            id: country_map
            orientation: "horizontal"
            NodeRV:
                md_bg_color: get_color_from_hex("#0d021b")    
                id: rv
         
        MDBottomNavigation:
            size_hint_y: .1
            panel_color: get_color_from_hex("#0d021b")
            text_color_normal: get_color_from_hex("#fcb711")
            text_color_active: get_color_from_hex("#fad783")
            selected_color_background: get_color_from_hex("#200c3a")
            MDBottomNavigationItem:
                name: "wallet"
                text: "Wallet"
                icon: "wallet"
                on_tab_release: root.wallet_dialog()
                on_tab_press: 
            MDBottomNavigationItem:
                name: "Refresh"
                text: "Refresh"
                icon: "shield-refresh"
                on_tab_release: root.refresh_nodes_and_subs()
                
            MDBottomNavigationItem:
                name: "help"
                text: "Help"
                icon: "account-question"
                on_tab_release: root.build_help_screen_interface()
                
    
<TooltipMDRaisedButton@MDRaisedButton+MDTooltip>
            
<NodeScreen>
    name: "nodes"
    MDBoxLayout:
        orientation: "vertical"
        NodeRV:
            id: rv
        ActionBar:
            background_normal: ''
            background_down: ''
            background_color: get_color_from_hex("#0d021b")
            ActionView:
                ActionPrevious:
                    icon: "arrow-left-circle"
                    title: 'Go Back'
                    with_previous: True
                    on_release: root.set_previous_screen() 
    
<WalletScreen>:
    name: "wallet"
    wallet_name: ""
    address_qrcode: ""
    sentinel_logo: root.return_coin_logo("dvpn")
    secret_logo: root.return_coin_logo("scrt")
    osmosis_logo: root.return_coin_logo("osmo")
    cosmos_logo: root.return_coin_logo("atom")
    decentr_logo: root.return_coin_logo("dec")
    dec_text: ""
    scrt_text: " "
    atom_text: " "
    dvpn_text: " "
    osmo_text: " "
    wallet_address: ""
    MDBoxLayout:
        orientation: "vertical"
        MDTopAppBar:
            id: toolbar
            title: "Wallet"
            md_bg_color: get_color_from_hex("#FFB908")
            padding: 0,20,0,0
            MDTextField:
                hint_text: "Address"
                mode: "fill"
                size_hint_x: .5 
                pos_hint: {"center_x" : .5, "center_y": .5}                
                text: root.wallet_address
                readonly: True
                opacity: 1
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#000000")
                normal_color: app.theme_cls.accent_color
                
        MDFloatLayout:

            Image:
                source: root.get_qr_code_address()
                pos_hint: {'x': 0, 'top': 1}
                size_hint_y: .5
                
            MDRaisedButton:
                pos_hint: {'x' : .1 , 'top': .9 }
                text: "REFRESH"
                on_release: root.refresh_wallet()
                
            MDRaisedButton:
                pos_hint: {'x' : .8 , 'top': .9 }
                text: "RE-FUEL"
                on_release: root.open_fiat_interface()
                
            
            Image:
                source: root.sentinel_logo
                pos_hint: {'x': -.2, 'top': .9}
            MDLabel:
                text: root.dvpn_text
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {'x': .35, 'top': .905}
                font_name: "RobotoMono-Regular"
                

            Image:
                source: root.secret_logo
                pos_hint: {'x': -.2, 'top': .77}
                
            MDLabel:
                text: root.scrt_text
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {'x': .35, 'top': .7695}
                font_name: "RobotoMono-Regular"
                
            Image:
                source: root.osmosis_logo
                pos_hint: {'x': -.2, 'top': .63}
                
            MDLabel:
                text: root.osmo_text
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {'x': .35, 'top': .6295}
                font_name: "RobotoMono-Regular"
            Image:
                source: root.cosmos_logo
                pos_hint: {'x': .25, 'top': .89}
                
            MDLabel:
                text: root.atom_text
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {'x': .8, 'top': .89}
                font_name: "RobotoMono-Regular"
            Image:
                source: root.decentr_logo
                pos_hint: {'x': .25, 'top': .76}
                
            MDLabel:
                text: root.dec_text
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {'x': .8, 'top': .76}
                font_name: "RobotoMono-Regular"
    ActionBar:
        background_normal: ''
        background_down: ''
        background_color: get_color_from_hex("#0d021b")
        ActionView:
            ActionPrevious:
                icon: "arrow-left-circle"
                title: 'Go Back'
                with_previous: True
                on_release: root.set_previous_screen() 

    

<WalletRestore>:
    name: "walletrestore"
    title: "Wallet Create"
    ActionBar:
        background_normal: ''
        background_down: ''
        background_color: get_color_from_hex("#0d021b")
        ActionView:
            ActionPrevious:
                icon: "arrow-left-circle"
                title: 'Go Back'
                with_previous: True
                on_release: root.set_previous_screen() 
    
    
    ClickableTextFieldRoundSeed:
        id: seed
        size_hint_x: None
        width: "300dp"
        height: "300dp"
        hint_text: "Seed Phrase"
        pos_hint: {"center_x": .5, "center_y": .80}
        
    MDLabel:
        id: seed_hint
        text: "Leave blank if creating a new wallet"
        theme_text_color: "Custom"
        text_color: get_color_from_hex("#4a4545")
        pos_hint: {"x": .47, "center_y": .74}
        font_size: "12dp"
     
    ClickableTextFieldRoundName:
        id: name
        size_hint_x: None
        width: "300dp"
        height: "300dp"
        hint_text: "Wallet Name"
        pos_hint: {"center_x": .5, "center_y": .67}
        
    MDLabel:
        id: wallet_name_warning
        opacity: 0
        text: "You must give the wallet a name"
        theme_text_color: "Custom"
        text_color: get_color_from_hex("f42121")
        pos_hint: {"x": .47, "center_y": .61}
        font_size: "12dp"
     
    ClickableTextFieldRoundPass:
        id: password
        size_hint_x: None
        width: "300dp"
        height: "300dp"
        hint_text: "Wallet Password"
        pos_hint: {"center_x": .5, "center_y": .55}
        MDLabel:
        
    MDLabel:
        id: wallet_password_warning
        opacity: 0
        text: "Must be at least 8 characters"
        theme_text_color: "Custom"
        text_color: get_color_from_hex("f42121")
        pos_hint: {"x": .47, "center_y": .49}
        font_size: "12dp"
        
    MDRaisedButton:
        id: restore_wallet_button
        text: "Create"
        pos_hint: {"center_x": .5, "center_y": .4}
        on_press: root.restore_wallet_from_seed_phrase()
    
    
    
<NodeRV>:
    key_viewclass: "viewclass"
    bar_width: dp(12)
    scroll_type: ["bars", "content"]
    canvas.before:
        Color:
            rgba: get_color_from_hex("#fccf62")
        Rectangle:
            pos: self.pos
            size: self.size
    RecycleGridLayout:
        md_bg_color: get_color_from_hex("#0d021b")
        cols:1
        default_size: dp(200), dp(150)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height
        orientation: 'lr-tb' 
        spacing: 15
        padding: 4,4,4,4
        
        


        
<-FullImage>:
    keep_ratio: True
    allow_stretch: False
    canvas:
        Rectangle:
            texture: self.texture
            size: self.width - 150 , self.height 
            pos: self.x - 150, self.y           
            
<-FulImage2>:
    keep_ratio: True
    allow_stretch: False
    
    canvas:
        Rectangle:
            texture: self.texture
            size: self.width - 120, self.height - 60
            pos: self.x , self.y + 10
            
                       
<RecycleViewCountryRow>:
    size_hint_y: None
    height: self.height
    size: "180dp", "150dp"
    type_swipe: "hand"
    pos_hint: {"center_x": .5, "center_y": .5}
    padding: 10,10
    border_radius: 20
    radius: [10]
    num_text: ""
    country_text: " "
    source_image: " "
    on_press: root.show_country_nodes(root.country_text)
    md_bg_color: get_color_from_hex("#0d021b")
    MDGridLayout:
        cols: 1
        padding: 20,0,0,0
        MDFloatLayout:
            MDLabel:
                text: root.country_text
                id: country
                theme_text_color: "Custom"
                font_style: "H6"
                font_size: "24sp"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {"x" : 0, "top" : 1.3}
                size_hint_x: None
                width: "200dp"
            MDLabel:
                text: root.num_text
                id: country
                theme_text_color: "Custom"
                font_style: "H6"
                font_size: "18sp"
                text_color: get_color_from_hex("#ffffff")
                pos_hint: {"x" : 0, "top" : 1.0}
                size_hint_x: None
                width: "200dp"
            Image:
                source: root.source_image
                # {"x", "y", "top", "bottom", "left", "right" }
                pos_hint: {"x" : .9, "top" : 1.175 }
            
    MDSeparator:
        color: 1,1,1,1
                    
<RecycleViewRow>:
    size_hint_y: None
    size: "180dp", "180dp"
    pos_hint: {"center_x": .5, "center_y": .5}
    orientation: "vertical"
    padding: 10,10
    border_radius: 20
    radius: [10]
    md_bg_color: get_color_from_hex("#0d021b")
    moniker_text: "."
    country_text: "."
    price_text: "."
    address_text: "."
    city_text: " "
    source_image: " "
    speed_image: " "
    speed_text: " "
    node_score: " "
    votes: " "
    city: " "
    ripple_behavior: True
    on_press: root.subscribe_to_node(root.price_text, root.address_text, root.moniker_text)
    MDGridLayout:
        cols: 1
        
        MDFloatLayout:
        
            MDLabel:
                text: root.moniker_text
                theme_text_color: "Custom"
                font_style: "H6"
                font_size: "22sp"
                font_name: root.get_font()
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {"x" : 0, "top" : 1.3}
                size_hint_x: None
                width: "400dp"
            MDLabel:
                text: root.address_text
                theme_text_color: "Custom"
                font_style: "Subtitle2"
                font_size: "10sp"
                text_color: (0/255.0,141/255.0,155/255.0,255/255.0)
                pos_hint: {"x" : 0, "top" : 1.1}
            MDLabel:
                text: root.price_text
                theme_text_color: "Custom"
                font_style: "Subtitle2"
                font_size: "13sp"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {"x" : 0, "top" : .85}
            MDLabel:
                text: "SCORE: "
                theme_text_color: "Custom"
                font_style: "Subtitle2"
                font_size: "11sp"
                text_color: get_color_from_hex("#ffffff")
                pos_hint: {"x" : 0, "top" : .7}
            MDLabel:
                text: root.node_score
                theme_text_color: "Custom"
                font_style: "Subtitle2"
                font_size: "11sp"
                text_color: get_color_from_hex("#ffffff")
                pos_hint: {"x" : .055, "top" : .7}
            MDLabel:
                text: "VOTES: "
                theme_text_color: "Custom"
                font_style: "Subtitle2"
                font_size: "11sp"
                text_color: get_color_from_hex("#ffffff")
                pos_hint: {"x" : .125, "top" : .7}
            MDLabel:
                text: root.votes
                theme_text_color: "Custom"
                font_style: "Subtitle2"
                font_size: "11sp"
                text_color: get_color_from_hex("#ffffff")
                pos_hint: {"x" : .175, "top" : .7}
                
            Image:
                source: root.source_image
                # {"x", "y", "top", "bottom", "left", "right" }
                pos_hint: {"x" : .3, "top" : 1.3 }

            MDLabel:
                text: root.speed_text
                theme_text_color: "Custom"
                #font_style: "Subtitle2"
                font_name: root.get_font()
                font_size: "12sp"
                text_color: 1,1,1,1
                pos_hint: {"x" : .43 , "top": .86 }
            Image:
                source: root.speed_image
                pos_hint: {"x" : .44 , "top": .95 }
                size_hint: None, .525
                
            MDLabel:    
                text: root.country_text
                theme_text_color: "Custom"
                font_style: "H6"
                font_size: "22sp"
                text_color: (1,1,1,1)  
                pos_hint: {"right" : 1.75 , "top": .8 }
            MDLabel:    
                text: root.city
                theme_text_color: "Custom"
                font_style: "Subtitle2"
                font_size: "13sp"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {"right" : 1.75 , "top": .625 }  

    OnHoverMDRaisedButton:
        text: "Get Details"
        md_bg_color: get_color_from_hex("#fcb711")
        text_color: 0,0,0,1
        on_press: root.get_city_of_node(root.address_text)
        
        
    MDSeparator:
        color: 1,1,1,1

<OnHoverMDRaisedButton>:

<RecycleViewSubRow>:
    size_hint_y: None
    size: "180dp", "180dp"
    pos_hint: {"center_x": .5, "center_y": .5}
    orientation: "vertical"
    padding: 10,10
    border_radius: 20
    radius: [10]
    md_bg_color: get_color_from_hex("#0d021b")
    moniker_text: "."
    sub_id_text: " "
    country_text: "."
    price_text: "."
    address_text: "."
    city_text: " "
    allocated_text: "10GB"
    consumed_text: "10GB"
    source_image: " "
    speed_image: " "
    speed_text: " "
    city: " "
    score: " "
    votes: " "
    MDFloatLayout:
        MDLabel:
            text: root.moniker_text
            theme_text_color: "Custom"
            font_style: "H6"
            font_size: "24sp"
            font_name: root.get_font()
            text_color: get_color_from_hex("#fcb711")
            width: "350dp"
            pos_hint: {"x" : 0, "top" : 1.45}
            size_hint_x: None
        Image:
            id: country_image
            source: root.source_image
            pos_hint: {"x" : .3, "top" : 1.25}
            
        MDLabel:    
            text: root.country_text
            theme_text_color: "Custom"
            font_style: "H6"
            font_size: "22sp"
            text_color: get_color_from_hex("#b2b1b1")  
            pos_hint: {"x" : .768, "top" : 0.8}
        MDLabel:    
            text: root.city
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "13sp"
            text_color: get_color_from_hex("#fcb711")
            pos_hint: {"x" : .768, "top": .625 }
        MDLabel:
            text: root.address_text
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "9sp"
            text_color: get_color_from_hex("#3c3c3c")
            pos_hint: {"x" : 0, "top" : 1.29}
        MDLabel:
            text: root.sub_id_text
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "14sp"
            text_color: (0/255.0,141/255.0,155/255.0,255/255.0)
            opacity: 0
        MDLabel:
            text: "Deposit: "
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "11sp"
            text_color: get_color_from_hex("#b2b1b1")
            pos_hint: {"x" : 0, "top" : 1.15}
        MDLabel:
            text: root.price_text
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "11sp"
            text_color: get_color_from_hex("#fcb711")
            pos_hint: {"x" : .08, "top" : 1.15}
        MDLabel:
            text: "Allocated: "
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "11sp"
            text_color: 1,1,1,1
            pos_hint: {"x" : 0, "top" : 1.03}
        MDLabel:
            text: root.allocated_text
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "11sp"
            text_color: 1,1,1,1
            pos_hint: {"x" : .08, "top" : 1.03}
        MDLabel:
            text: "Used: "
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "11sp"
            text_color: 1,1,1,1
            pos_hint: {"x" : 0.15, "top" : 1.03}
        MDLabel:
            text: root.consumed_text
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "11sp"
            text_color: 1,1,1,1
            pos_hint: {"x" : 0.2, "top" : 1.03 }
        MDLabel:
            text: "Score: "
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "11sp"
            text_color: 1,1,1,1
            pos_hint: {"x" : 0, "top" : .875}
        MDLabel:
            text: root.score
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "11sp"
            text_color: 1,1,1,1
            pos_hint: {"x" : 0.08, "top" : .875}
        MDLabel:
            text: "Votes: "
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "11sp"
            text_color: 1,1,1,1
            pos_hint: {"x" : 0.15, "top" : .875}
        MDLabel:
            text: root.votes
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "11sp"
            text_color: 1,1,1,1
            pos_hint: {"x" : .2, "top" : .875}
        
        MDProgressBar:
            id: quota
            value: root.get_data_used(root.allocated_text, root.consumed_text, root.address_text)
            color: app.theme_cls.accent_color
            #back_color: get_color_from_hex("#ffffff")
            pos_hint: {"x" : 0, "top" : .475 }
            size_hint_x: .5
            size_hint_y: .06
        MDLabel:
            id: consumed_data
            text: " "
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "11sp"
            text_color: 1,1,1,1
            pos_hint: {"x" : .5, "top" : 1.03 }      
        Switch:
            id: node_switch
            canvas.after:
                Color:
                    rgb:  get_color_from_hex("#fab40c")
            active: False
            #text: "Connect"
            md_bg_color: get_color_from_hex("#fcb711")
            text_color: 0,0,0,1
            on_active: root.connect_to_node(root.sub_id_text,root.address_text, root.moniker_text, self.active)
            pos_hint: {"x" : 0, "top" : .55 }
            size_hint: None,None
        MDSeparator:
            color: 1,1,1,1
            pos_hint: {"x" : 0, "top" : .0 }
         
<YellowSwitch>:
    size_hint: None, None
    size: 100, 100

    Switch:
        id: new_switch  
        active: False   
        on_active: root.switch_callback()

        canvas:
            Color:
                rgb: get_color_from_hex("#fab40c")
            Rectangle:
                size: sp(41.5), sp(20)
                pos: self.center_x - sp(40.0), self.center_y - sp(10)
            Color:
                rgb: 0, 0, 1, 1
            Rectangle:
                size: sp(41.0), sp(20)
                pos: self.center_x, self.center_y - sp(10)
        Label:
            color: 1, 1, 1, 1
            text: 'CONNECTED'
            bold: True
            font_size: 13
            pos: self.parent.center_x - sp(70), self.parent.center_y - sp(50)                
        Label:
            color: 0, 1, 0, 1
            text: 'DISCONNECTED'
            bold: True
            font_size: 13
            pos: self.parent.center_x - sp(30), self.parent.center_y - sp(50)
<ClickableTextFieldRoundSeed>:
    size_hint_y: None
    height: seed_phrase.height

    MDTextField:
        id: seed_phrase
        multiline: True
        hint_text: root.hint_text
        text: root.text
        password: True
        icon_left: "key-variant"
        mode: "rectangle"

    MDIconButton:
        icon: "eye-off"
        pos_hint: {"center_y": .5}
        pos: seed_phrase.width - self.width + dp(8), 0
        theme_text_color: "Hint"
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            seed_phrase.password = False if seed_phrase.password is True else True


<ClickableTextFieldRoundName>:
    size_hint_y: None
    height: wallet_name.height

    MDTextField:
        id: wallet_name
        hint_text: root.hint_text
        text: root.text
        password: False
        icon_left: "key-variant"
        mode: "rectangle"

    MDIconButton:
        icon: "eye-off"
        pos_hint: {"center_y": .5}
        pos: wallet_name.width - self.width + dp(8), 0
        theme_text_color: "Hint"
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            wallet_name.password = False if wallet_name.password is True else True
            
<ClickableTextFieldRoundPass>:
    size_hint_y: None
    height: wallet_password.height

    MDTextField:
        id: wallet_password
        hint_text: root.hint_text
        text: root.text
        password: True
        icon_left: "key-variant"
        mode: "rectangle"

    MDIconButton:
        icon: "eye-off"
        pos_hint: {"center_y": .5}
        pos: wallet_password.width - self.width + dp(8), 0
        theme_text_color: "Hint"
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            wallet_password.password = False if wallet_password.password is True else True



<Tab>

<SelectableLabel>:
    # Draw a background to indicate selection
    text1: "GLARGLY"
    text2: "BLARGLY"
    text3: "SHIMARGLY"
    canvas.before:

        Color:
            rgba: (.0, 0.9, .1, .3) if self.selected else (0, 0, 0, 1)
        Rectangle:
            pos: self.pos
            size: self.size

<RV>:
    viewclass: 'SelectableLabel'
    RecycleBoxLayout:
        default_size: None, dp(48)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height
        orientation: "vertical"

<WalletInfoContent>
    orientation: "vertical"
    spacing: "15dp"
    size_hint_y: None
    height: "300dp"
    seed_phrase: ""
    wallet_address: ""
    wallet_password: ""
    wallet_name: ""
    padding: 0,10,0,10
    
    MDTextField:
        multiline: True
        hint_text: "Mnemonic Seed"
        text: root.seed_phrase
        readonly: True
        
    MDBoxLayout:
        id: seed_box
        orientation: "horizontal"
        padding: 0,0,20,20
        spacing: "20dp"    
        MDRaisedButton:
            id: copy_seed_button
            text: "COPY SEED"
            font_size: dp(9)
            pos_hint: {"center_x": .1, "center_y": .5}
            on_press: root.copy_seed_phrase()
            size_hint: None, None
            size: 15,10
            
    MDTextField:
        hint_text: "Wallet"
        mode: "rectangle"
        text: root.wallet_name
        readonly: True
    
    MDTextField:
        hint_text: "Address"
        mode: "rectangle"
        text: root.wallet_address
        readonly: True
    
    MDTextField:
        hint_text: "Password"
        mode: "rectangle"
        text: root.wallet_password
        readonly: True


<LatencyContent>
    orientation: "vertical"
    spacing: "1dp"
    size_hint_y: None
    height: "140dp"

    MDBoxLayout:
        orientation: "vertical"
        MDLabel:
            id: latency_text
            text: "Latency threshold. Increasing latency will take longer to load but will load more nodes; conversely for lower latency."
            font_size: "12dp"
                
    MDBoxLayout:
        orientation: "horizontal"
        MDSlider:
            
            id: slider1
            min: 5
            max: 50
            value: 21
            
        MDLabel:
            id: latency
            text: str(int(slider1.value)) + "s" 
            size_hint_x: None
            width: 75
                       
<SubscribeContent>
    orientation: "vertical"
    spacing: "1dp"
    size_hint_y: None
    height: "250dp"
    price_text: ""
    naddress: " "
    moniker: " "
    MDFloatLayout:
        MDLabel:
            id: moniker
            text: root.moniker
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "20sp"
            font_name: root.get_font()
            text_color: get_color_from_hex("#fcb711")
            pos_hint: {"x" : 0, "top" : 1.35}
        MDLabel:
            id: moniker_text
            text: root.naddress
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "9sp"
            text_color: get_color_from_hex("#ffffff")
            pos_hint: {"x" : 0, "top" : 1}
    
    MDBoxLayout:
        orientation: "horizontal"
        MDSlider:
            
            id: slider1
            min: 1
            max: 314
            value: 34
            on_value: root.parse_coin_deposit(root.ids.drop_item.current_item)
            
        MDLabel:
            text: str(int(slider1.value)) + " GB" 
            size_hint_x: None
            width: 75
    MDBoxLayout:
        orientation: "horizontal"
        size_hint_x: .8
        spacing: 20
        
        MDTextField:
            id: deposit
            hint_text: "Deposit"
            mode: "fill"
            text: ""
            size_hint_y: .65
            width: "50dp"
            height: "30dp"
            readonly: True
        
        MDTextField:
            id: price
            hint_text: "Price"
            mode: "fill"
            text: root.price_text
            size_hint_y: .65
            width: "50dp"
            height: "30dp"
            readonly: True
            
        MDDropDownItem:
            id: drop_item
            pos_hint: {'center_x': .5, 'center_y': .5}
            text: "udvpn"
            on_release: root.menu.open()
<ProcessingSubDialog>
    orientation: "vertical"
    spacing: "1dp"
    size_hint_y: None
    height: "130dp"
    price_text: ""
    naddress: " "
    moniker: " "
    deposit: " "
    MDFloatLayout:
        MDLabel:
            id: moniker
            text: root.moniker
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "20sp"
            font_name: root.get_font()
            text_color: get_color_from_hex("#fcb711")
            pos_hint: {"x" : 0, "top" : 1.35}
        MDLabel:
            id: naddress
            text: root.naddress
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "9sp"
            text_color: get_color_from_hex("#ffffff")
            pos_hint: {"x" : 0, "top" : 1.2}
        MDLabel:
            id: deposit
            text: root.deposit
            theme_text_color: "Custom"
            font_style: "Subtitle2"
            font_size: "18sp"
            text_color: get_color_from_hex("#fcb711")
            pos_hint: {"x" : 0, "top" : .95}
    
<RatingContent>
    spacing: "1dp"
    size_hint_y: None
    height: "100dp"
    price_text: ""
    naddress: " "
    moniker: " "    
    orientation: "vertical"
    MDFloatLayout:
        MDLabel:
            id: node_moniker_text
            text: root.moniker
            font_name: root.get_font()
            font_size: 19
            pos_hint: {"x" : 0.05, "center_y": .9}
             
        MDLabel:
            id: node_addresss_text
            text: root.naddress
            font_size: 10
            pos_hint: {"x" : 0.05, "center_y": .70}
             
        MDSlider:
            id: rating_slider
            min: 1
            max: 10
            value: 9
            pos_hint: {"x" : 0.00, "center_y": .5}
            
          
<HelpScreen>:
    name: "helpscreen"
    title: "Help Screen"
    ActionBar:
        background_normal: ''
        background_down: ''
        background_color: get_color_from_hex("#0d021b")
        ActionView:
            ActionPrevious:
                icon: "arrow-left-circle"
                title: 'Go Back'
                with_previous: True
                on_release: root.set_previous_screen() 
    
    MDBoxLayout:
        orientation: "vertical"
        MDLabel:
            font_name: "Roboto-Bold"
            text: "HELP SCREEN"
            font_size: "30sp"
            size_hint_y: .1
            width: dp(500)
            pos_hint: { "right": 1.4, "top": 1.5}
            theme_text_color: "Custom"
            text_color: get_color_from_hex("#fcb711")
        MDLabel:
            font_name: "Roboto-Bold"
            text: root.GetMeileVersion()
            font_size: "16sp"
            size_hint_y: .1
            width: dp(500)
            pos_hint: { "right": 1.475, "top": 1.5}
            theme_text_color: "Custom"
            text_color: get_color_from_hex("#fcb711")
        ScrollView:
            effect_cls: "ScrollEffect"
            scroll_type: ['bars']
            MDGridLayout:
                rows: 12
                cols: 1
                size_hint_y:None
                size_hint_x: 1
                height: self.minimum_height
                spacing: "10dp"
                MDLabel:
                    font_name: "Roboto-BoldItalic"
                    text: "What is a mnemonic/seed phrase?"
                    size_hint_y: None
                    height: self.texture_size[1]
                    size_hint_x: 1
                    halign: "center"
                MDLabel:
                    font_name: "DejaVuSans"
                    text: "A mnemonic/seed phrase is a set of pre-defined dictionary words that form a unique set. This unique set is used to generate a wallet with a unique address, similar to how bank accounts have a unique number. i.e., no two bank accounts have the same account number. This address can be used to send and receive currency just like your bank account."
                    size_hint_y: None
                    height: self.texture_size[1]
                    size_hint_x: 1
                    pos_hint_x: .9
                    halign: "center"
                    theme_text_color: "Custom"
                    text_color: get_color_from_hex("#fcb711")
                    font_size: "12dp"
                    
                MDLabel:
                    font_name: "Roboto-BoldItalic"
                    text: "What is an address?"
                    size_hint_y: None
                    height: self.texture_size[1]
                    size_hint_x: 1
                    halign: "center"
                MDLabel:
                    font_name: "DejaVuSans"
                    text: "An address is a unique identifier that links your funds to the blockchain. This is a pseudonymous identifier meaning it links your digital identity on the blockchain without storing any personal identifiers of an individual. Addresses are used to send and receive funds in the native currency of the acting network. "
                    size_hint_y: None
                    height: self.texture_size[1]
                    size_hint_x: 1
                    pos_hint_x: .9
                    halign: "center" 
                    theme_text_color: "Custom"
                    text_color: get_color_from_hex("#fcb711")
                    font_size: "12dp"
                MDLabel:
                    font_name: "Roboto-BoldItalic"
                    text: "How do I receive funds to be able to subscribe and use Meile dVPN?"
                    size_hint_y: None
                    height: self.texture_size[1]
                    size_hint_x: 1
                    halign: "center"
                MDLabel:
                    font_name: "DejaVuSans"
                    text: "There are two primary ways to receive tokens to purchase dVPN (the currency) subscriptions and utilize the network. 1.) You get the DVPN token on a exchange and send it to your wallet address. Current exchanges are KuCoin, HotBit, Polarity and Osmosis. Once you purchase the tokens on the exchange, you need to withdraw them to your address listed in the wallet section of this app. The tokens should appear within minutes after a withdrawal and you can begin purchasing and subscribing to Sentinel dVPN nodes through Meile. 2.) You can purchase the currency used for Meile dVPN right in our app via the 'RE-FUEL' button within the wallet. These funds will be handled by our servers and the payment processing is handled by Stripe. Once you successfully complete a purchase, your funds should appear in your wallet within minutes of a successful purchase through our app. This is the easiest method to using Meile dVPN."
                    size_hint_y: None
                    height: self.texture_size[1]
                    size_hint_x: 1
                    pos_hint_x: .9
                    halign: "center" 
                    theme_text_color: "Custom"
                    text_color: get_color_from_hex("#fcb711")
                    font_size: "12dp"
                MDLabel:
                    font_name: "Roboto-BoldItalic"
                    text: "What is MathNodes privacy policy?"
                    size_hint_y: None
                    height: self.texture_size[1]
                    size_hint_x: 1
                    halign: "center"
                MDLabel:
                    font_name: "DejaVuSans"
                    text: "MathNodes uses Stripe to process payments in order to receive funds to use the dVPN. You will see that we do not even need the name of the individual. Once a payment is processed through Stripe, MathNodes stores only the payment_id received from Stripe, the address of your wallet, and the amount of tokens sent (1,000). We have to keep records some information in case there is a dispute and we need to query the orders and verify if tokens were sent to the recipient's address. We do not store your name, your credit card details, or any other information beside what we have mentioned. The full policy can be viewed at https://meile.app/policy"
                    size_hint_y: None
                    height: self.texture_size[1]
                    size_hint_x: 1
                    pos_hint_x: .9
                    halign: "center" 
                    theme_text_color: "Custom"
                    text_color: get_color_from_hex("#fcb711")
                    font_size: "12dp"
                MDLabel:
                    font_name: "Roboto-BoldItalic"
                    text: "Why is a dVPN better than a tradiational VPN?"
                    size_hint_y: None
                    height: self.texture_size[1]
                    size_hint_x: 1
                    halign: "center"
                MDLabel:
                    font_name: "DejaVuSans"
                    text: "A traditional VPN, like Nord, Norton, Cryptostorm, or Proton is a centralized set of servers that a user connects through to access the internet. Most VPNs are required to keep a degree of logging information about users. Centralized VPNs can terminate a user's plan or restrict access to the internet based on private, public, or governmental policy. A dVPN such as the one Meile offers, uses blockchain technologies via the Sentinel Network to ensure a decentralized structure. This means that the servers you connect through are run by a community of volunteers rather than a central authority. As such, no logging takes places, users don't have the ability to throttle or restrict traffic and no censorship is possible through the use of a dVPN."
                    size_hint_y: None
                    height: self.texture_size[1]
                    size_hint_x: 1
                    pos_hint_x: .9
                    halign: "center" 
                    theme_text_color: "Custom"
                    text_color: get_color_from_hex("#fcb711")
                    font_size: "12dp"
                    
                MDLabel:
                    font_name: "Roboto-BoldItalic"
                    text: "Is there a refund policy?"
                    size_hint_y: None
                    height: self.texture_size[1]
                    size_hint_x: 1
                    halign: "center"
                MDLabel:
                    font_name: "DejaVuSans"
                    text: "Absolutely no refunds under any circumstances. All token sales are final as they cannot be refunded due to the limitations of blockchain technology. If for some reason your credit card was charged for a token purchase, and you did not receive the tokens in your wallet, please reach out to us at support@mathnodes.com - We will advise you on how to produce evidences of your purchase and we may double check our records along with a block explorer to view if the transaction did not go through."
                    size_hint_y: None
                    height: self.texture_size[1]
                    size_hint_x: 1
                    pos_hint_x: .9
                    halign: "center" 
                    theme_text_color: "Custom"
                    text_color: get_color_from_hex("#fcb711")
                    font_size: "12dp"
<FiatInterface>:
    name: "fiatgateway"
    title: "Re-fuel"
    wallet_address: root.get_my_wallet_address()
    MDBoxLayout:
        orientation: "vertical"
        MDTopAppBar:
            id: toolbar
            title: "Wallet"
            md_bg_color: get_color_from_hex("#FFB908")
            height: "70dp"
            type: "top"
            padding: 0,20,0,0
            
            MDTextField:
                hint_text: "Address"
                mode: "fill"
                size_hint_x: .5
                pos_hint: {"center_x" : .5, "center_y": .5}
                text: root.wallet_address
                readonly: True
                opacity: 1
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#000000")
                normal_color: app.theme_cls.accent_color
        MDFloatLayout:

            ClickableTextFieldRoundCC:
                id: ccnum
                size_hint_x: None
                width: "300dp"
                height: "300dp"
                hint_text: "Credit Card Number"
                pos_hint: {"center_x": .5, "center_y": .80}
         
            MDLabel:
                id: credit_card_number_warning
                opacity: 0
                text: "Sixteen digit number"
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {"x": .47, "center_y": .74}
                font_size: "12dp"
             
            MDLabel:
                opacity: 1
                text: "Month"
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {"x": .35, "center_y": .7}
                font_size: "12dp"
             
            MDDropDownItem:
                id: month_list
                pos_hint: {'center_x': .38, 'center_y': .67}
                text: '01'
                on_release: root.menu_month.open()
                
            MDLabel:
                opacity: 1
                text: "Year"
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {"x": .45, "center_y": .7}
                font_size: "12dp"
            
            MDDropDownItem:
                id: year_list
                pos_hint: {'center_x': .48, 'center_y': .67}
                text: '2022'
                on_release: root.menu_year.open()
                
            ClickableTextFieldRoundCVV:
                id: cvvnum
                size_hint_x: None
                width: "100dp"
                height: "300dp"
                hint_text: "CVV"
                pos_hint: {"center_x": .6, "center_y": .69}
                
            MDLabel:
                id: cvv_code_warning
                opacity: 0
                text: "Wrong CVV. 3 or 4 digit code"
                theme_text_color: "Custom"
                text_color: get_color_from_hex("f42121")
                pos_hint: {"x": .47, "center_y": .62}
                font_size: "12dp"
            MDLabel:
                id: dvpn_qty_text
                opacity: 1
                text: "DVPN"
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {"x": .355, "center_y": .60}
                font_size: "14dp"
                
            MDDropDownItem:
                id: dvpn_qty_menu
                pos_hint: {'center_x': .43, 'center_y': .60}
                text: '1000'
                on_release: root.menu_dvpn_qty.open()
                
            MDFloatLayout:
        
                CheckBox:
                    on_active: root.terms_agreement(self.active)
                    pos_hint: {"x": .36, "center_y": .54}
                    color: get_color_from_hex("f42121")
                    size_hint: None, None
                    size: dp(30), dp(30)
                MDLabel:
                    text: "I agree to the terms of the MathNodes purchasing policy."
                    font_size: 10
                    theme_text_color: "Custom"
                    text_color: get_color_from_hex("f42121")
                    pos_hint: {"x": .40, "center_y": .54}
                    
            MDLabel:
                id: dvpn_price
                text: "DVPN: $" + str(root.get_dvpn_price())
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {"x": .40, "center_y": .48}
                font_size: "16dp"
                
            MDLabel:
                id: surcharge
                text: "Surcharge: $1.25"
                theme_text_color: "Custom"
                text_color: get_color_from_hex("ffffff")
                pos_hint: {"x": .40, "center_y": .43}
                font_size: "16dp"
            MDLabel:
                id: dvpn_qty
                text:"QTY: " + str(root.DVPNOptions[root.idvpn]) + " dvpn"
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {"x": .40, "center_y": .38}
                font_size: "16dp"
            
            MDLabel:
                id: charge_amount
                text:"Total Charge: $" + str(round((root.get_dvpn_price()*root.get_dvpn_qty())+1.25,2))
                theme_text_color: "Custom"
                text_color: get_color_from_hex("#fcb711")
                pos_hint: {"x": .40, "center_y": .33}
                font_size: "16dp"
                
            MDRaisedButton:
                id: restore_wallet_button
                text: "PURCHASE"
                pos_hint: {"center_x": .5, "center_y": .25}
                on_press: root.pay()
            
    ActionBar:
        background_normal: ''
        background_down: ''
        background_color: get_color_from_hex("#0d021b")
        ActionView:
            ActionPrevious:
                icon: "arrow-left-circle"
                title: 'Go Back'
                with_previous: True
                on_release: root.set_previous_screen() 
    
        
<ClickableTextFieldRoundCC>:
    size_hint_y: None
    height: ccnum.height

    MDTextField:
        id: ccnum
        hint_text: root.hint_text
        text: root.text
        password: True
        icon_left: "key-variant"
        mode: "rectangle"

    MDIconButton:
        icon: "eye-off"
        pos_hint: {"center_y": .5}
        pos: ccnum.width - self.width + dp(8), 0
        theme_text_color: "Hint"
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            ccnum.password = False if ccnum.password is True else True



<ClickableTextFieldRoundCVV>:
    size_hint_y: None
    height: cvvnum.height

    MDTextField:
        id: cvvnum
        hint_text: root.hint_text
        text: root.text
        password: True
        icon_left: "key-variant"
        mode: "rectangle"

    MDIconButton:
        icon: "eye-off"
        pos_hint: {"center_y": .5}
        pos: cvvnum.width - self.width + dp(8), 0
        theme_text_color: "Hint"
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            cvvnum.password = False if cvvnum.password is True else True

<IconListItem>

    IconLeftWidget:
        icon: root.icon
        
        
<TXContent>
    orientation: "vertical"
    spacing: "4dp"
    size_hint_y: None
    height: "130dp"
    MDTextField:
        id: message
        multiline: True
        hint_text: "Message"
        text: " "
        readonly: True
    MDTextField:
        id: txhash
        hint_text: "TX ID"
        mode: "rectangle"
        text: " "
        readonly: True
    MDLabel:
        text: "Please copy the TX ID and save it somewhere safely."
        font_size: "11dp"
   
<ContinentMap>:
    zoom: 3
